@property --base {
  inherits: true;
  syntax: '<number>';
  initial-value: 0;
}

@property --sat {
  inherits: true;
  syntax: '<number>';
  initial-value: 0;
}

.featuresSection {
  width: 100vw;
  position: relative;
  margin-left: calc(-50vw + 50%);
  overflow: hidden;
  isolation: isolate;
  --card-size: clamp(350px, 40vw, 450px);
  --card-ar: 2.4 / 1;
  --x: 50%;
  --y: 50%;
  --spotlight: 50vmin;
  --backdrop: transparent;
  --radius: 24;
  --border: 2;
  --backup-border: rgba(255, 255, 255, 0.08);
  --bg-spot-opacity: 0.12;
  --border-light-opacity: 0.8;
  --border-spot-opacity: 0.6;
  --spread: 60;
  --saturation: 100;
  --lightness: 70;
  --spotlight-size: calc(var(--card-size) * 0.8);
}

.featuresSection::after,
.featuresSection::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  background: radial-gradient(hsl(var(--base, 0) 80% 50%), transparent);
  filter: blur(80px);
  width: calc(var(--card-size) * 1.2);
  aspect-ratio: 1;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  opacity: 0.05;
  pointer-events: none;
  z-index: -1;
}

.featuresSection::after {
  width: calc(var(--card-size) * 0.4);
  opacity: 0.1;
  z-index: 2;
  transform: translate(-50%, -75%);
}

.featuresList {
  display: flex;
  gap: 3rem;
  margin: 0;
  mask: linear-gradient(90deg, transparent, white 5%, white 95%, transparent);
  overflow-x: auto;
  overflow-y: hidden;
  padding-block: 3rem;
  padding-inline: calc(50vw - (var(--card-size) * 0.5));
  scroll-snap-type: x mandatory;
  width: 100%;
  list-style: none;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.featuresList::-webkit-scrollbar {
  display: none;
}

.featureItem {
  display: grid;
  place-items: center;
  scroll-snap-align: center;
  position: relative;
  flex-shrink: 0;
}

.featureCard {
  aspect-ratio: var(--card-ar);
  border-radius: calc(var(--radius) * 1px);
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 2rem;
  position: relative;
  width: var(--card-size);
  backdrop-filter: blur(10px);
  transition: transform 0.3s ease;
  clip-path: inset(0 round calc(var(--radius) * 1px));
  
  /* Glow specific styles */
  --border-size: calc(var(--border, 2) * 1px);
  --spotlight-size: calc(var(--card-size) * 1.2);
  --hue: calc(var(--base) + (var(--xp, 0) * var(--spread, 0)));
  background-image: 
    radial-gradient(
      var(--spotlight-size) var(--spotlight-size) at
      var(--x)
      var(--y),
      hsl(var(--hue, 210) calc(var(--saturation, 100) * 1%) calc(var(--lightness, 70) * 1%) / var(--bg-spot-opacity, 0.12)), transparent
    ),
    radial-gradient(
      circle at 50% 50%,
      hsl(var(--hue, 210) 95% 70% / 0.3), 
      hsl(var(--hue, 210) 90% 60% / 0.2) 40%, 
      hsl(var(--hue, 210) 85% 50% / 0.1) 60%,
      transparent 75%
    );
  background-color: rgba(10, 10, 10, 0.4);
  background-size: 100% 100%, 100% 100%;
  background-position: 50% 50%;
  background-attachment: local, local;
  border: var(--border-size) solid hsl(var(--hue, 210) 80% 50% / 0.3);
  position: relative;
  touch-action: none;
}

.featureCard::before,
.featureCard::after {
  pointer-events: none;
  content: "";
  position: absolute;
  inset: calc(var(--border-size) * -1);
  border: var(--border-size) solid transparent;
  border-radius: calc(var(--radius) * 1px);
  background-attachment: local;
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: 0 0;
  mask:
    linear-gradient(transparent, transparent),
    linear-gradient(white, white);
  mask-clip: padding-box, border-box;
  mask-composite: intersect;
}

/* This is the emphasis light */
.featureCard::before {
  background-image: radial-gradient(
    calc(var(--spotlight-size) * 0.75) calc(var(--spotlight-size) * 0.75) at
    var(--x)
    var(--y),
    hsl(var(--hue, 210) 95% 60% / 0.8), transparent 100%
  );
  filter: brightness(2.5);
}

/* This is the spotlight */
.featureCard::after {
  background-image: radial-gradient(
    calc(var(--spotlight-size) * 0.4) calc(var(--spotlight-size) * 0.4) at
    var(--x)
    var(--y),
    hsl(var(--hue, 210) 100% 90% / 0.9), transparent 100%
  );
}

.featureCard *::selection {
  background: hsl(var(--hue) 80% 40%);
}

.cardHeader {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.iconBox {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  align-self: flex-start;
}

.gradientOverlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, rgba(0, 0, 0, 0) 100%);
  z-index: 1;
}

.cardTitle {
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  color: #fff;
}

.cardText {
  color: rgba(255, 255, 255, 0.6);
  font-size: 14px;
  line-height: 1.6;
  margin: 0;
  flex: 1;
}

/* Scroll animations */
@supports (animation-timeline: scroll()) {
  @keyframes change-accent {
    to {
      --base: 320;
    }
  }
  @keyframes saturate {
    0%, 25%, 75%, 100% {
      --sat: 0;
    }
    50% {
      --sat: 100;
    }
  }
  .featuresSection {
    timeline-scope: --list;
    animation: change-accent both linear;
    animation-timeline: --list;
  }
  .featuresList {
    scroll-timeline: --list inline;
  }
  .featureItem {
    animation: saturate both linear;
    animation-timeline: view(inline);
  }
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .featuresSection {
    --card-size: clamp(280px, 85vw, 350px);
  }
  
  .featuresList {
    gap: 2rem;
    mask: linear-gradient(90deg, transparent, white 10%, white 90%, transparent);
    padding-block: 2rem;
    padding-inline: calc(50vw - (var(--card-size) * 0.5));
  }
  
  .featureCard {
    padding: 1.5rem;
  }
  
  .cardTitle {
    font-size: 18px;
  }
  
  .cardText {
    font-size: 13px;
  }
}

@media (max-width: 430px) {
  .featuresSection {
    --card-size: calc(100vw - 60px);
  }

  .featuresList {
    padding-inline: 30px;
    gap: 10px;
    mask: none;
  }
}
